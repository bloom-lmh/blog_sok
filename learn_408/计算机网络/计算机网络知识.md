# 计算机网络知识

## MIME 类型与 Content-Type

当发送 POST 请求时请求数据在请求体中，请求体中的数据可以是任意格式，所有服务端并不知道请求体中的数据是什么类型该使用什么方式来进行解析。所以需要在请求头中设置 content-type，告诉服务器请求中携带的数据是什么类型（JSON、表单数据、XML 等），服务器根据这个信息来解析请求数据，这些类型叫做 MIME 类型。

## OSI 七层模型

以下是 OSI 七层模型与实际问题驱动演进的对应关系表格：

| OSI 分层       | 核心问题                                                                 | 解决方案                         | 关键技术示例                           |
| -------------- | ------------------------------------------------------------------------ | -------------------------------- | -------------------------------------- |
| **物理层**     | 如何用物理介质（电线/光纤/无线电）传输 0 和 1？                          | 用电信号/光信号/电磁波表示二进制 | 以太网接口、Wi-Fi 射频调制、光纤脉冲   |
| **数据链路层** | 如何确保相邻节点间的数据可靠传输？                                       | 数据分帧+差错控制+流量控制       | MAC 地址、CRC 校验、交换机 VLAN        |
| **网络层**     | 如何跨网络找到目标设备并传输数据？                                       | 逻辑寻址+路由选择                | IP 协议（IPv4/IPv6）、路由器 OSPF/BGP  |
| **传输层**     | 如何满足不同应用对可靠性（如文件传输）和实时性（如视频通话）的不同需求？ | 提供面向连接和无连接的两种服务   | TCP（可靠传输）、UDP（高效传输）       |
| **会话层**     | 如何建立/维护/终止会话，并处理异常中断？                                 | 会话控制+状态同步                | NetBIOS、RPC 断点续传、JWT 会话令牌    |
| **表示层**     | 如何解决不同系统间的数据格式差异（编码/加密/压缩）？                     | 数据格式转换+安全处理            | SSL/TLS 加密、JSON/XML 转换、Gzip 压缩 |
| **应用层**     | 如何让最终用户方便使用网络服务（发邮件/浏览网页等）？                    | 定义应用级协议和接口             | HTTP/HTTPS、SMTP、DNS、WebSocket       |

## 业务成功和网络成功

- 网络层成功：是指请求发送出去也收到了响应
- 网络层失败：是指请求发送出去后，没有收到响应，比如超时、DNS 解析失败、跨域被拒绝等
- 业务层成功：是指在网络层成功的基础上，服务器返回的 HTTP 状态码为 200，并且响应数据格式正确
- 业务层失败：是指服务器返回的 HTTP 状态码不为 200，或者响应数据格式错误。

比如 js 中 xmlhttprequest 的状态码：`readyState === 4` 代表网络层成功，但不代表业务层成功(服务器返回 404 错误)，`readyState === 4` 但 `status === 200`，这时网络层业务层都成功。
