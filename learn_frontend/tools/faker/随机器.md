# 随机器

[[toc]]

## 什么是 Randomizer

- 核心作用：`Randomizer` 接口允许你在 Faker 中使用自定义的随机数生成源。
- 默认情况：Faker 自带了默认的 `Randomizer`，在绝大多数情况下都完全够用。
- 何时需要自定义：只有当你有特定需求时才需要更改，例如：
  - 在多个 Faker 实例之间共享同一个随机源。
  - 使用第三方的随机数生成库。

## Faker 内置的 Randomizer

`Faker` 提供了两种内置的 `Randomizer` 变体：

- `generateMersenne32Randomizer`：32 位 `Randomizer`，速度更快。
- `generateMersenne53Randomizer`：53 位 `Randomizer`，自 v9 版本起成为默认，能生成质量更高、重复更少的随机值。

## 如何使用 Randomizer

你可以在创建 Faker 或 `SimpleFaker` 实例时，通过构造函数的配置对象传入自定义的 `Randomizer`：

```js
import { Faker, Randomizer } from '@faker-js/faker';

// 假设你已经创建或获取了一个 Randomizer 实例
const myCustomRandomizer: Randomizer = ...;

// 创建一个使用自定义 Randomizer 的 Faker 实例
const customFaker = new Faker({
  locale: 'zh_CN', // 设置语言环境
  randomizer: myCustomRandomizer // 使用自定义随机源
});
```

## 为什么要复用 Randomizer

文档重点强调了一个非常实用的场景：在多个不同语言环境的 Faker 实例间共享同一个 `Randomizer`。
场景举例：你想为一个中国人生成一个中文名字和一个英文别名，且希望这个组合是可重现的（比如用于测试）。

- 问题：如果分别对两个独立的 Faker 实例（中文和英文）进行 seed 操作，可能会因为调用顺序或嵌套问题导致结果不可重现。
- 解决方案：让两个 Faker 实例共享同一个 Randomizer。

```js
import { en, zh_CN, Faker } from '@faker-js/faker';

// 创建一个 Randomizer 实例（这里使用默认的）
const sharedRandomizer = generateMersenne53Randomizer();

// 两个 Faker 实例使用同一个随机源
const fakerEN = new Faker({ locale: en, randomizer: sharedRandomizer });
const fakerZH = new Faker({ locale: zh_CN, randomizer: sharedRandomizer });

// 只需对 Randomizer 进行一次 seed，即可影响所有使用它的实例
sharedRandomizer.seed(12345);

const chineseName = fakerZH.person.firstName(); // 例如：张伟
const englishAlias = fakerEN.person.firstName(); // 例如：John

// 无论你如何调用，只要 seed 相同，chineseName 和 englishAlias 的组合就始终相同
```
