# 本地化

[[toc]]

## 切换语言环境

`faker.js` 支持 70 多种语言环境，当使用我们的默认实例 `import { faker } from '@faker-js/faker'` 时，你将获得英文数据。当然你也可以导入你可以导入德语语言环境：

```js
import { fakerDE as faker } from '@faker-js/faker';
```

## 自定义语言环境和后备

如果我们内置的 faker 实例不能满足你的需求，你可以构建自己的：

```js
import type { LocaleDefinition } from '@faker-js/faker';
import { base, de, de_CH, en, Faker } from '@faker-js/faker';

const customLocale: LocaleDefinition = {
  title: 'My custom locale',
  internet: {
    domainSuffix: ['test'],
  },
};

export const customFaker = new Faker({
  locale: [customLocale, de_CH, de, en, base],
});
```

在此示例中，有 5 个语言环境。按顺序检查每个语言环境，优先使用第一个匹配的语言环境的数据，如果没有匹配，则使用后备语言环境的数据。

- `customLocale` 是你的自定义语言环境定义，它将覆盖所有其他后备定义。
- `de_CH` 是特定的语言环境定义，它使用 CH（瑞士）数据覆盖一些德语定义。
- `de` 是通用的 de（德语）语言环境定义。
- `en` 是一个通用的 en（英语）语言环境定义。这是我们最完整的语言环境，因此我们添加它来填补一些空白。根据你的需要，你可能希望或不希望将其作为后备。
- `base` 是基本语言环境定义，其中包含可用于每种语言的定义（例如表情符号）。

## 可用语言环境

![一些语言环境](https://image-bucket-1307756649.cos.ap-chengdu.myqcloud.com/image/20250914103816042.png)
Locale（数据）和 Faker 列引用相应的 import 名称：

```js
import { de, fakerDE } from '@faker-js/faker';
```

> 更多可用的语言环境参见 [faker.js/locale](https://faker.nodejs.cn/guide/localization.html)

## 区域设置代码

- 同一语言：语言环境以系统的方式命名。前两个字符是 ISO 639-1 标准 后面的小写语言代码，例如 ar 代表阿拉伯语，en 代表英语。
- 同一语言环境，不同地区：可以在后面添加两个字母的大写国家/地区代码，例如 `en_US` 代表英语（美国），`en_AU` 代表英语（澳大利亚）。
- 同一地区不同方言：可以在地区代码后再添加字母表示方言，例如 `en_AU_ocker`（澳大利亚的英语，"Ocker" 方言）或 `sr_RS_latin`（塞尔维亚的塞尔维亚语，拉丁字母）

## 处理缺失数据错误

```bash
[Error]: The locale data for 'category.entry' are missing in this locale.
Please contribute the missing data to the project or use a locale/Faker instance that has these data.
For more information see https://faker.nodejs.cn/guide/localization.html
```

如果你收到此错误，则意味着你正在使用一个缺少该数据的语言环境。你可以通过以下方式解决此问题：

```js
import { Faker, el } from '@faker-js/faker'; // [!code --]
import { Faker, base, el, en } from '@faker-js/faker'; // [!code ++]

const faker = new Faker({
  locale: [el], // [!code --]
  locale: [el, en, base], // [!code ++]
});
console.log(faker.location.country()); // 'Belgium'
```

## 处理不适用数据错误

```bash
[Error]: The locale data for 'category.entry' aren't applicable to this locale.
If you think this is a bug, please report it at: https://github.com/faker-js/faker
```

如果你收到此错误，则表示当前语言环境无法为该方法提供合理的值。例如，香港没有邮政编码，因此 en_HK 语言环境无法提供这些数据。其他语言环境和方法也是如此。

```js
import { fakerEN_HK } from '@faker-js/faker';

console.log(fakerEN_HK.location.zipCode()); // Error
```

对于这些情况，我们明确将数据设置为 null 以澄清我们已经考虑过它，但没有有效的值可以放在那里。我们可以使用一个空数组 []，但一些地区数据存储为对象 {}，因此 null 适用于它们两者，而无需自定义下游处理缺失数据。

如果你想改用其他后备数据，可以像这样定义它们：

```js
import { Faker, en, en_HK } from '@faker-js/faker';

const faker = new Faker({
  locale: [{ location: { postcode: en.location.postcode } }, en_HK],
});
console.log(faker.location.zipCode()); // '17551-0348'
```

::: warning 注意
由于 null 被视为当前数据，因此它不会为此使用任何后备。因此以下代码不起作用：

```js
import { Faker, en, en_HK } from '@faker-js/faker';

const faker = new Faker({
  locale: [en_HK, { location: { postcode: en.location.postcode } }],
});
console.log(faker.location.zipCode()); // Error
```
