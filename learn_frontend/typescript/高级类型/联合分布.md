# 联合分布

[[toc]]

## 什么是联合分布？

当一个联合类型出现在某些类型操作上下文中时，TypeScript 会自动将其拆开，逐个应用操作，最后合并结果。这就像数学中的分配律：

```ts
A × (B + C) = A×B + A×C
```

## 联合分布的例子

### 模板字符串

比如下面的模板字符串中出现了联合类型

```ts
type a = `${'book'}.${'title' | 'name' | 'author'}`;
// 结果是：
// type a = "book.title" | "book.name" | "book.author"
```

### 条件类型中的分布

```ts
type ToArray<T> = T extends any ? T[] : never;

type Result = ToArray<string | number>;
// 等价于：
// (string extends any ? string[] : never) | (number extends any ? number[] : never)
// = string[] | number[]
```

## 关闭分布

有时你不希望分布发生，可以用 `[T]` extends `[unknown]` 包裹：

```ts
// 想要：不分布，整体处理
type NoDistribute<T> = [T] extends [string] ? 'yes' : 'no';

type Test = NoDistribute<string | number>;
// 不会拆开！
// [string\|number] extends [string] → false → 'no'
```
