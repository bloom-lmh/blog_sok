# 动态组件

[[toc]]

## 介绍

动态组件是 Vue.js 最强大的功能之一，它允许我们在运行时根据条件渲染不同的组件。

## 基本用法

比如 Tab 界面：

```vue
<script setup>
import Home from './Home.vue';
import Posts from './Posts.vue';
import Archive from './Archive.vue';
import { ref } from 'vue';

const currentTab = ref('Home');

const tabs = {
  Home,
  Posts,
  Archive,
};
</script>

<template>
  <div class="demo">
    <button
      v-for="(_, tab) in tabs"
      :key="tab"
      :class="['tab-button', { active: currentTab === tab }]"
      @click="currentTab = tab">
      {{ tab }}
    </button>
    <component :is="tabs[currentTab]" class="tab"></component>
  </div>
</template>
```

在上面的例子中，被传给 `:is` 的值可以是以下几种：

- 被注册的组件名
- 导入的组件对象

## 创建一般的 HTML 元素

is 除了可以渲染组件以外，还可以渲染一般的 HTML 元素(这本来就是 web Component 的标准)。比如：

```vue
<!-- 定义一个自定义元素 -->
<my-fancy-button is="button">点我！</my-fancy-button>
```

- 这里，`<my-fancy-button>` 是一个自定义元素。
- is="button" 告诉浏览器：这个自定义元素应该继承原生 `<button>` 的所有默认行为和可访问性（a11y）特性。
- 它变身成了一个按钮，但你可以给它添加额外的功能和样式。

## 缓存组件

当使用 `<component :is="...">` 来在多个组件间作切换时，被切换掉的组件会被卸载。我们可以通过 `<KeepAlive>` 组件强制被切换掉的组件仍然保持“存活”的状态。
